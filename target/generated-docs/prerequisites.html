<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>Pre-requisites</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
    display: block;
}

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video {
    display: inline-block;
}

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) {
    display: none;
    height: 0;
}

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template {
    display: none;
}

script {
    display: none !important;
}

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html {
    font-family: sans-serif; /* 1 */
    -ms-text-size-adjust: 100%; /* 2 */
    -webkit-text-size-adjust: 100%; /* 2 */
}

/** Remove default margin. */
body {
    margin: 0;
}

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a {
    background: transparent;
}

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus {
    outline: thin dotted;
}

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover {
    outline: 0;
}

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] {
    border-bottom: 1px dotted;
}

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong {
    font-weight: bold;
}

/** Address styling not present in Safari 5 and Chrome. */
dfn {
    font-style: italic;
}

/** Address differences between Firefox and other browsers. */
hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/** Address styling not present in IE 8/9. */
mark {
    background: #ff0;
    color: #000;
}

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp {
    font-family: monospace, serif;
    font-size: 1em;
}

/** Improve readability of pre-formatted text in all browsers. */
pre {
    white-space: pre-wrap;
}

/** Set consistent quote types. */
q {
    quotes: "\201C" "\201D" "\2018" "\2019";
}

/** Address inconsistent and variable font size in all browsers. */
small {
    font-size: 80%;
}

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img {
    border: 0;
}

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) {
    overflow: hidden;
}

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure {
    margin: 0;
}

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend {
    border: 0; /* 1 */
    padding: 0; /* 2 */
}

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea {
    font-family: inherit; /* 1 */
    font-size: 100%; /* 2 */
    margin: 0; /* 3 */
}

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input {
    line-height: normal;
}

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select {
    text-transform: none;
}

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
}

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] {
    cursor: default;
}

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
}

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table {
    border-collapse: collapse;
    border-spacing: 0;
}

meta.foundation-mq-small {
    font-family: "only screen and (min-width: 768px)";
    width: 768px;
}

meta.foundation-mq-medium {
    font-family: "only screen and (min-width:1280px)";
    width: 1280px;
}

meta.foundation-mq-large {
    font-family: "only screen and (min-width:1440px)";
    width: 1440px;
}

*, *:before, *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}

html, body {
    font-size: 100%;
}

body {
    background: white;
    color: rgba(0, 0, 0, 0.8);
    padding: 0;
    margin: 0;
    font-family: "Noto Serif", "DejaVu Serif", serif;
    font-weight: normal;
    font-style: normal;
    line-height: 1;
    position: relative;
    cursor: auto;
}

a:hover {
    cursor: pointer;
}

img, object, embed {
    max-width: 100%;
    height: auto;
}

object, embed {
    height: 100%;
}

img {
    -ms-interpolation-mode: bicubic;
}

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object {
    max-width: none !important;
}

.left {
    float: left !important;
}

.right {
    float: right !important;
}

.text-left {
    text-align: left !important;
}

.text-right {
    text-align: right !important;
}

.text-center {
    text-align: center !important;
}

.text-justify {
    text-align: justify !important;
}

.hide {
    display: none;
}

.antialiased, body {
    -webkit-font-smoothing: antialiased;
}

img {
    display: inline-block;
    vertical-align: middle;
}

textarea {
    height: auto;
    min-height: 50px;
}

select {
    width: 100%;
}

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: 1.21875em;
    line-height: 1.6;
}

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    line-height: 1.45;
    color: #7a2518;
    font-weight: normal;
    margin-top: 0;
    margin-bottom: 0.25em;
}

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td {
    margin: 0;
    padding: 0;
    direction: ltr;
}

/* Default Link Styles */
a {
    color: #2156a5;
    text-decoration: underline;
    line-height: inherit;
}

a:hover, a:focus {
    color: #1d4b8f;
}

a img {
    border: none;
}

/* Default paragraph styles */
p {
    font-family: inherit;
    font-weight: normal;
    font-size: 1em;
    line-height: 1.6;
    margin-bottom: 1.25em;
    text-rendering: optimizeLegibility;
}

p aside {
    font-size: 0.875em;
    line-height: 1.35;
    font-style: italic;
}

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    font-family: "Open Sans", "DejaVu Sans", sans-serif;
    font-weight: 300;
    font-style: normal;
    color: #ba3925;
    text-rendering: optimizeLegibility;
    margin-top: 1em;
    margin-bottom: 0.5em;
    line-height: 1.0125em;
}

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small {
    font-size: 60%;
    color: #e99b8f;
    line-height: 0;
}

h1 {
    font-size: 2.125em;
}

h2 {
    font-size: 1.6875em;
}

h3, #toctitle, .sidebarblock > .content > .title {
    font-size: 1.375em;
}

h4 {
    font-size: 1.125em;
}

h5 {
    font-size: 1.125em;
}

h6 {
    font-size: 1em;
}

hr {
    border: solid #ddddd8;
    border-width: 1px 0 0;
    clear: both;
    margin: 1.25em 0 1.1875em;
    height: 0;
}

/* Helpful Typography Defaults */
em, i {
    font-style: italic;
    line-height: inherit;
}

strong, b {
    font-weight: bold;
    line-height: inherit;
}

small {
    font-size: 60%;
    line-height: inherit;
}

code {
    font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
    font-weight: normal;
    color: rgba(0, 0, 0, 0.9);
}

/* Lists */
ul, ol, dl {
    font-size: 1em;
    line-height: 1.6;
    margin-bottom: 1.25em;
    list-style-position: outside;
    font-family: inherit;
}

ul, ol {
    margin-left: 1.5em;
}

ul.no-bullet, ol.no-bullet {
    margin-left: 1.5em;
}

/* Unordered Lists */
ul li ul, ul li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
    font-size: 1em; /* Override nested font-size change */
}

ul.square li ul, ul.circle li ul, ul.disc li ul {
    list-style: inherit;
}

ul.square {
    list-style-type: square;
}

ul.circle {
    list-style-type: circle;
}

ul.disc {
    list-style-type: disc;
}

ul.no-bullet {
    list-style: none;
}

/* Ordered Lists */
ol li ul, ol li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
}

/* Definition Lists */
dl dt {
    margin-bottom: 0.3125em;
    font-weight: bold;
}

dl dd {
    margin-bottom: 1.25em;
}

/* Abbreviations */
abbr, acronym {
    text-transform: uppercase;
    font-size: 90%;
    color: rgba(0, 0, 0, 0.8);
    border-bottom: 1px dotted #dddddd;
    cursor: help;
}

abbr {
    text-transform: none;
}

/* Blockquotes */
blockquote {
    margin: 0 0 1.25em;
    padding: 0.5625em 1.25em 0 1.1875em;
    border-left: 1px solid #dddddd;
}

blockquote cite {
    display: block;
    font-size: 0.9375em;
    color: rgba(0, 0, 0, 0.6);
}

blockquote cite:before {
    content: "\2014 \0020";
}

blockquote cite a, blockquote cite a:visited {
    color: rgba(0, 0, 0, 0.6);
}

blockquote, blockquote p {
    line-height: 1.6;
    color: rgba(0, 0, 0, 0.85);
}

/* Microformats */
.vcard {
    display: inline-block;
    margin: 0 0 1.25em 0;
    border: 1px solid #dddddd;
    padding: 0.625em 0.75em;
}

.vcard li {
    margin: 0;
    display: block;
}

.vcard .fn {
    font-weight: bold;
    font-size: 0.9375em;
}

.vevent .summary {
    font-weight: bold;
}

.vevent abbr {
    cursor: auto;
    text-decoration: none;
    font-weight: bold;
    border: none;
    padding: 0 0.0625em;
}

@media only screen and (min-width: 768px) {
    h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
        line-height: 1.2;
    }

    h1 {
        font-size: 2.75em;
    }

    h2 {
        font-size: 2.3125em;
    }

    h3, #toctitle, .sidebarblock > .content > .title {
        font-size: 1.6875em;
    }

    h4 {
        font-size: 1.4375em;
    }
}

/* Tables */
table {
    background: white;
    margin-bottom: 1.25em;
    border: solid 1px #dedede;
}

table thead, table tfoot {
    background: #f7f8f7;
    font-weight: bold;
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
    padding: 0.5em 0.625em 0.625em;
    font-size: inherit;
    color: rgba(0, 0, 0, 0.8);
    text-align: left;
}

table tr th, table tr td {
    padding: 0.5625em 0.625em;
    font-size: inherit;
    color: rgba(0, 0, 0, 0.8);
}

table tr.even, table tr.alt, table tr:nth-of-type(even) {
    background: #f8f8f7;
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
    display: table-cell;
    line-height: 1.6;
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    line-height: 1.2;
    word-spacing: -0.05em;
}

h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong {
    font-weight: 400;
}

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after {
    content: " ";
    display: table;
}

.clearfix:after, .float-group:after {
    clear: both;
}

*:not(pre) > code {
    font-size: 0.9375em;
    font-style: normal !important;
    letter-spacing: 0;
    padding: 0.1em 0.5ex;
    word-spacing: -0.15em;
    background-color: #f7f7f8;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    line-height: 1.45;
    text-rendering: optimizeSpeed;
}

pre, pre > code {
    line-height: 1.45;
    color: rgba(0, 0, 0, 0.9);
    font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace;
    font-weight: normal;
    text-rendering: optimizeSpeed;
}

.keyseq {
    color: rgba(51, 51, 51, 0.8);
}

kbd {
    display: inline-block;
    color: rgba(0, 0, 0, 0.8);
    font-size: 0.75em;
    line-height: 1.4;
    background-color: #f7f7f7;
    border: 1px solid #ccc;
    -webkit-border-radius: 3px;
    border-radius: 3px;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset;
    margin: -0.15em 0.15em 0 0.15em;
    padding: 0.2em 0.6em 0.2em 0.5em;
    vertical-align: middle;
    white-space: nowrap;
}

.keyseq kbd:first-child {
    margin-left: 0;
}

.keyseq kbd:last-child {
    margin-right: 0;
}

.menuseq, .menu {
    color: rgba(0, 0, 0, 0.8);
}

b.button:before, b.button:after {
    position: relative;
    top: -1px;
    font-weight: normal;
}

b.button:before {
    content: "[";
    padding: 0 3px 0 2px;
}

b.button:after {
    content: "]";
    padding: 0 2px 0 3px;
}

p a > code:hover {
    color: rgba(0, 0, 0, 0.9);
}

#header, #content, #footnotes, #footer {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0;
    margin-bottom: 0;
    max-width: 62.5em;
    *zoom: 1;
    position: relative;
    padding-left: 0.9375em;
    padding-right: 0.9375em;
}

#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after {
    content: " ";
    display: table;
}

#header:after, #content:after, #footnotes:after, #footer:after {
    clear: both;
}

#content {
    margin-top: 1.25em;
}

#content:before {
    content: none;
}

#header > h1:first-child {
    color: rgba(0, 0, 0, 0.85);
    margin-top: 2.25rem;
    margin-bottom: 0;
}

#header > h1:first-child + #toc {
    margin-top: 8px;
    border-top: 1px solid #ddddd8;
}

#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) {
    border-bottom: 1px solid #ddddd8;
    padding-bottom: 8px;
}

#header .details {
    border-bottom: 1px solid #ddddd8;
    line-height: 1.45;
    padding-top: 0.25em;
    padding-bottom: 0.25em;
    padding-left: 0.25em;
    color: rgba(0, 0, 0, 0.6);
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    -ms-flex-flow: row wrap;
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap;
}

#header .details span:first-child {
    margin-left: -0.125em;
}

#header .details span.email a {
    color: rgba(0, 0, 0, 0.85);
}

#header .details br {
    display: none;
}

#header .details br + span:before {
    content: "\00a0\2013\00a0";
}

#header .details br + span.author:before {
    content: "\00a0\22c5\00a0";
    color: rgba(0, 0, 0, 0.85);
}

#header .details br + span#revremark:before {
    content: "\00a0|\00a0";
}

#header #revnumber {
    text-transform: capitalize;
}

#header #revnumber:after {
    content: "\00a0";
}

#content > h1:first-child:not([class]) {
    color: rgba(0, 0, 0, 0.85);
    border-bottom: 1px solid #ddddd8;
    padding-bottom: 8px;
    margin-top: 0;
    padding-top: 1rem;
    margin-bottom: 1.25rem;
}

#toc {
    border-bottom: 1px solid #efefed;
    padding-bottom: 0.5em;
}

#toc > ul {
    margin-left: 0.125em;
}

#toc ul.sectlevel0 > li > a {
    font-style: italic;
}

#toc ul.sectlevel0 ul.sectlevel1 {
    margin: 0.5em 0;
}

#toc ul {
    font-family: "Open Sans", "DejaVu Sans", sans-serif;
    list-style-type: none;
}

#toc a {
    text-decoration: none;
}

#toc a:active {
    text-decoration: underline;
}

#toctitle {
    color: #7a2518;
    font-size: 1.2em;
}

@media only screen and (min-width: 768px) {
    #toctitle {
        font-size: 1.375em;
    }

    body.toc2 {
        padding-left: 15em;
        padding-right: 0;
    }

    #toc.toc2 {
        margin-top: 0 !important;
        background-color: #f8f8f7;
        position: fixed;
        width: 15em;
        left: 0;
        top: 0;
        border-right: 1px solid #efefed;
        border-top-width: 0 !important;
        border-bottom-width: 0 !important;
        z-index: 1000;
        padding: 1.25em 1em;
        height: 100%;
        overflow: auto;
    }

    #toc.toc2 #toctitle {
        margin-top: 0;
        font-size: 1.2em;
    }

    #toc.toc2 > ul {
        font-size: 0.9em;
        margin-bottom: 0;
    }

    #toc.toc2 ul ul {
        margin-left: 0;
        padding-left: 1em;
    }

    #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
        padding-left: 0;
        margin-top: 0.5em;
        margin-bottom: 0.5em;
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 15em;
    }

    body.toc2.toc-right #toc.toc2 {
        border-right-width: 0;
        border-left: 1px solid #efefed;
        left: auto;
        right: 0;
    }
}

@media only screen and (min-width: 1280px) {
    body.toc2 {
        padding-left: 20em;
        padding-right: 0;
    }

    #toc.toc2 {
        width: 20em;
    }

    #toc.toc2 #toctitle {
        font-size: 1.375em;
    }

    #toc.toc2 > ul {
        font-size: 0.95em;
    }

    #toc.toc2 ul ul {
        padding-left: 1.25em;
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 20em;
    }
}

#content #toc {
    border-style: solid;
    border-width: 1px;
    border-color: #e0e0dc;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f8f8f7;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

#content #toc > :first-child {
    margin-top: 0;
}

#content #toc > :last-child {
    margin-bottom: 0;
}

#footer {
    max-width: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    padding: 1.25em;
}

#footer-text {
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.44;
}

.sect1 {
    padding-bottom: 0.625em;
}

@media only screen and (min-width: 768px) {
    .sect1 {
        padding-bottom: 1.25em;
    }
}

.sect1 + .sect1 {
    border-top: 1px solid #efefed;
}

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor {
    position: absolute;
    z-index: 1001;
    width: 1.5ex;
    margin-left: -1.5ex;
    display: block;
    text-decoration: none !important;
    visibility: hidden;
    text-align: center;
    font-weight: normal;
}

#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before {
    content: "\00A7";
    font-size: 0.85em;
    display: block;
    padding-top: 0.1em;
}

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover {
    visibility: visible;
}

#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link {
    color: #ba3925;
    text-decoration: none;
}

#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover {
    color: #a53221;
}

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock {
    margin-bottom: 1.25em;
}

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    text-rendering: optimizeLegibility;
    text-align: left;
    font-family: "Noto Serif", "DejaVu Serif", serif;
    font-size: 1rem;
    font-style: italic;
}

table.tableblock > caption.title {
    white-space: nowrap;
    overflow: visible;
    max-width: 0;
}

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    color: rgba(0, 0, 0, 0.85);
}

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: inherit;
}

.admonitionblock > table {
    border-collapse: separate;
    border: 0;
    background: none;
    width: 100%;
}

.admonitionblock > table td.icon {
    text-align: center;
    width: 80px;
}

.admonitionblock > table td.icon img {
    max-width: none;
}

.admonitionblock > table td.icon .title {
    font-weight: bold;
    font-family: "Open Sans", "DejaVu Sans", sans-serif;
    text-transform: uppercase;
}

.admonitionblock > table td.content {
    padding-left: 1.125em;
    padding-right: 1.25em;
    border-left: 1px solid #ddddd8;
    color: rgba(0, 0, 0, 0.6);
}

.admonitionblock > table td.content > :last-child > :last-child {
    margin-bottom: 0;
}

.exampleblock > .content {
    border-style: solid;
    border-width: 1px;
    border-color: #e6e6e6;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: white;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

.exampleblock > .content > :first-child {
    margin-top: 0;
}

.exampleblock > .content > :last-child {
    margin-bottom: 0;
}

.sidebarblock {
    border-style: solid;
    border-width: 1px;
    border-color: #e0e0dc;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f8f8f7;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

.sidebarblock > :first-child {
    margin-top: 0;
}

.sidebarblock > :last-child {
    margin-bottom: 0;
}

.sidebarblock > .content > .title {
    color: #7a2518;
    margin-top: 0;
    text-align: center;
}

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child {
    margin-bottom: 0;
}

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint {
    background: #f7f7f8;
}

.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint {
    background: #f2f1f1;
}

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
    -webkit-border-radius: 4px;
    border-radius: 4px;
    word-wrap: break-word;
    padding: 1em;
    font-size: 0.8125em;
}

.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap {
    overflow-x: auto;
    white-space: pre;
    word-wrap: normal;
}

@media only screen and (min-width: 768px) {
    .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
        font-size: 0.90625em;
    }
}

@media only screen and (min-width: 1280px) {
    .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
        font-size: 1em;
    }
}

.literalblock.output pre {
    color: #f7f7f8;
    background-color: rgba(0, 0, 0, 0.9);
}

.listingblock pre.highlightjs {
    padding: 0;
}

.listingblock pre.highlightjs > code {
    padding: 1em;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

.listingblock pre.prettyprint {
    border-width: 0;
}

.listingblock > .content {
    position: relative;
}

.listingblock code[data-lang]:before {
    display: none;
    content: attr(data-lang);
    position: absolute;
    font-size: 0.75em;
    top: 0.425rem;
    right: 0.5rem;
    line-height: 1;
    text-transform: uppercase;
    color: #999;
}

.listingblock:hover code[data-lang]:before {
    display: block;
}

.listingblock.terminal pre .command:before {
    content: attr(data-prompt);
    padding-right: 0.5em;
    color: #999;
}

.listingblock.terminal pre .command:not([data-prompt]):before {
    content: "$";
}

table.pyhltable {
    border-collapse: separate;
    border: 0;
    margin-bottom: 0;
    background: none;
}

table.pyhltable td {
    vertical-align: top;
    padding-top: 0;
    padding-bottom: 0;
}

table.pyhltable td.code {
    padding-left: .75em;
    padding-right: 0;
}

pre.pygments .lineno, table.pyhltable td:not(.code) {
    color: #999;
    padding-left: 0;
    padding-right: .5em;
    border-right: 1px solid #ddddd8;
}

pre.pygments .lineno {
    display: inline-block;
    margin-right: .25em;
}

table.pyhltable .linenodiv {
    background: none !important;
    padding-right: 0 !important;
}

.quoteblock {
    margin: 0 1em 1.25em 1.5em;
    display: table;
}

.quoteblock > .title {
    margin-left: -1.5em;
    margin-bottom: 0.75em;
}

.quoteblock blockquote, .quoteblock blockquote p {
    color: rgba(0, 0, 0, 0.85);
    font-size: 1.15rem;
    line-height: 1.75;
    word-spacing: 0.1em;
    letter-spacing: 0;
    font-style: italic;
    text-align: justify;
}

.quoteblock blockquote {
    margin: 0;
    padding: 0;
    border: 0;
}

.quoteblock blockquote:before {
    content: "\201c";
    float: left;
    font-size: 2.75em;
    font-weight: bold;
    line-height: 0.6em;
    margin-left: -0.6em;
    color: #7a2518;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.quoteblock blockquote > .paragraph:last-child p {
    margin-bottom: 0;
}

.quoteblock .attribution {
    margin-top: 0.5em;
    margin-right: 0.5ex;
    text-align: right;
}

.quoteblock .quoteblock {
    margin-left: 0;
    margin-right: 0;
    padding: 0.5em 0;
    border-left: 3px solid rgba(0, 0, 0, 0.6);
}

.quoteblock .quoteblock blockquote {
    padding: 0 0 0 0.75em;
}

.quoteblock .quoteblock blockquote:before {
    display: none;
}

.verseblock {
    margin: 0 1em 1.25em 1em;
}

.verseblock pre {
    font-family: "Open Sans", "DejaVu Sans", sans;
    font-size: 1.15rem;
    color: rgba(0, 0, 0, 0.85);
    font-weight: 300;
    text-rendering: optimizeLegibility;
}

.verseblock pre strong {
    font-weight: 400;
}

.verseblock .attribution {
    margin-top: 1.25rem;
    margin-left: 0.5ex;
}

.quoteblock .attribution, .verseblock .attribution {
    font-size: 0.9375em;
    line-height: 1.45;
    font-style: italic;
}

.quoteblock .attribution br, .verseblock .attribution br {
    display: none;
}

.quoteblock .attribution cite, .verseblock .attribution cite {
    display: block;
    letter-spacing: -0.05em;
    color: rgba(0, 0, 0, 0.6);
}

.quoteblock.abstract {
    margin: 0 0 1.25em 0;
    display: block;
}

.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p {
    text-align: left;
    word-spacing: 0;
}

.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before {
    display: none;
}

table.tableblock {
    max-width: 100%;
    border-collapse: separate;
}

table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child {
    margin-bottom: 0;
}

table.spread {
    width: 100%;
}

table.tableblock, th.tableblock, td.tableblock {
    border: 0 solid #dedede;
}

table.grid-all th.tableblock, table.grid-all td.tableblock {
    border-width: 0 1px 1px 0;
}

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock {
    border-width: 1px 1px 0 0;
}

table.grid-cols th.tableblock, table.grid-cols td.tableblock {
    border-width: 0 1px 0 0;
}

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child {
    border-right-width: 0;
}

table.grid-rows th.tableblock, table.grid-rows td.tableblock {
    border-width: 0 0 1px 0;
}

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock {
    border-bottom-width: 0;
}

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock {
    border-width: 1px 0 0 0;
}

table.frame-all {
    border-width: 1px;
}

table.frame-sides {
    border-width: 0 1px;
}

table.frame-topbot {
    border-width: 1px 0;
}

th.halign-left, td.halign-left {
    text-align: left;
}

th.halign-right, td.halign-right {
    text-align: right;
}

th.halign-center, td.halign-center {
    text-align: center;
}

th.valign-top, td.valign-top {
    vertical-align: top;
}

th.valign-bottom, td.valign-bottom {
    vertical-align: bottom;
}

th.valign-middle, td.valign-middle {
    vertical-align: middle;
}

table thead th, table tfoot th {
    font-weight: bold;
}

tbody tr th {
    display: table-cell;
    line-height: 1.6;
    background: #f7f8f7;
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
    color: rgba(0, 0, 0, 0.8);
    font-weight: bold;
}

p.tableblock > code:only-child {
    background: none;
    padding: 0;
}

p.tableblock {
    font-size: 1em;
}

td > div.verse {
    white-space: pre;
}

ol {
    margin-left: 1.75em;
}

ul li ol {
    margin-left: 1.5em;
}

dl dd {
    margin-left: 1.125em;
}

dl dd:last-child, dl dd:last-child > :last-child {
    margin-bottom: 0;
}

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
    margin-bottom: 0.625em;
}

ul.unstyled, ol.unnumbered, ul.checklist, ul.none {
    list-style-type: none;
}

ul.unstyled, ol.unnumbered, ul.checklist {
    margin-left: 0.625em;
}

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child {
    width: 1em;
    font-size: 0.85em;
}

ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    width: 1em;
    position: relative;
    top: 1px;
}

ul.inline {
    margin: 0 auto 0.625em auto;
    margin-left: -1.375em;
    margin-right: 0;
    padding: 0;
    list-style: none;
    overflow: hidden;
}

ul.inline > li {
    list-style: none;
    float: left;
    margin-left: 1.375em;
    display: block;
}

ul.inline > li > * {
    display: block;
}

.unstyled dl dt {
    font-weight: normal;
    font-style: normal;
}

ol.arabic {
    list-style-type: decimal;
}

ol.decimal {
    list-style-type: decimal-leading-zero;
}

ol.loweralpha {
    list-style-type: lower-alpha;
}

ol.upperalpha {
    list-style-type: upper-alpha;
}

ol.lowerroman {
    list-style-type: lower-roman;
}

ol.upperroman {
    list-style-type: upper-roman;
}

ol.lowergreek {
    list-style-type: lower-greek;
}

.hdlist > table, .colist > table {
    border: 0;
    background: none;
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
    background: none;
}

td.hdlist1 {
    padding-right: .75em;
    font-weight: bold;
}

td.hdlist1, td.hdlist2 {
    vertical-align: top;
}

.literalblock + .colist, .listingblock + .colist {
    margin-top: -0.5em;
}

.colist > table tr > td:first-of-type {
    padding: 0 0.75em;
    line-height: 1;
}

.colist > table tr > td:last-of-type {
    padding: 0.25em 0;
}

.thumb, .th {
    line-height: 0;
    display: inline-block;
    border: solid 4px white;
    -webkit-box-shadow: 0 0 0 1px #dddddd;
    box-shadow: 0 0 0 1px #dddddd;
}

.imageblock.left, .imageblock[style*="float: left"] {
    margin: 0.25em 0.625em 1.25em 0;
}

.imageblock.right, .imageblock[style*="float: right"] {
    margin: 0.25em 0 1.25em 0.625em;
}

.imageblock > .title {
    margin-bottom: 0;
}

.imageblock.thumb, .imageblock.th {
    border-width: 6px;
}

.imageblock.thumb > .title, .imageblock.th > .title {
    padding: 0 0.125em;
}

.image.left, .image.right {
    margin-top: 0.25em;
    margin-bottom: 0.25em;
    display: inline-block;
    line-height: 0;
}

.image.left {
    margin-right: 0.625em;
}

.image.right {
    margin-left: 0.625em;
}

a.image {
    text-decoration: none;
}

span.footnote, span.footnoteref {
    vertical-align: super;
    font-size: 0.875em;
}

span.footnote a, span.footnoteref a {
    text-decoration: none;
}

span.footnote a:active, span.footnoteref a:active {
    text-decoration: underline;
}

#footnotes {
    padding-top: 0.75em;
    padding-bottom: 0.75em;
    margin-bottom: 0.625em;
}

#footnotes hr {
    width: 20%;
    min-width: 6.25em;
    margin: -.25em 0 .75em 0;
    border-width: 1px 0 0 0;
}

#footnotes .footnote {
    padding: 0 0.375em;
    line-height: 1.3;
    font-size: 0.875em;
    margin-left: 1.2em;
    text-indent: -1.2em;
    margin-bottom: .2em;
}

#footnotes .footnote a:first-of-type {
    font-weight: bold;
    text-decoration: none;
}

#footnotes .footnote:last-of-type {
    margin-bottom: 0;
}

#content #footnotes {
    margin-top: -0.625em;
    margin-bottom: 0;
    padding: 0.75em 0;
}

.gist .file-data > table {
    border: 0;
    background: #fff;
    width: 100%;
    margin-bottom: 0;
}

.gist .file-data > table td.line-data {
    width: 99%;
}

div.unbreakable {
    page-break-inside: avoid;
}

.big {
    font-size: larger;
}

.small {
    font-size: smaller;
}

.underline {
    text-decoration: underline;
}

.overline {
    text-decoration: overline;
}

.line-through {
    text-decoration: line-through;
}

.aqua {
    color: #00bfbf;
}

.aqua-background {
    background-color: #00fafa;
}

.black {
    color: black;
}

.black-background {
    background-color: black;
}

.blue {
    color: #0000bf;
}

.blue-background {
    background-color: #0000fa;
}

.fuchsia {
    color: #bf00bf;
}

.fuchsia-background {
    background-color: #fa00fa;
}

.gray {
    color: #606060;
}

.gray-background {
    background-color: #7d7d7d;
}

.green {
    color: #006000;
}

.green-background {
    background-color: #007d00;
}

.lime {
    color: #00bf00;
}

.lime-background {
    background-color: #00fa00;
}

.maroon {
    color: #600000;
}

.maroon-background {
    background-color: #7d0000;
}

.navy {
    color: #000060;
}

.navy-background {
    background-color: #00007d;
}

.olive {
    color: #606000;
}

.olive-background {
    background-color: #7d7d00;
}

.purple {
    color: #600060;
}

.purple-background {
    background-color: #7d007d;
}

.red {
    color: #bf0000;
}

.red-background {
    background-color: #fa0000;
}

.silver {
    color: #909090;
}

.silver-background {
    background-color: #bcbcbc;
}

.teal {
    color: #006060;
}

.teal-background {
    background-color: #007d7d;
}

.white {
    color: #bfbfbf;
}

.white-background {
    background-color: #fafafa;
}

.yellow {
    color: #bfbf00;
}

.yellow-background {
    background-color: #fafa00;
}

span.icon > .fa {
    cursor: default;
}

.admonitionblock td.icon [class^="fa icon-"] {
    font-size: 2.5em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    cursor: default;
}

.admonitionblock td.icon .icon-note:before {
    content: "\f05a";
    color: #19407c;
}

.admonitionblock td.icon .icon-tip:before {
    content: "\f0eb";
    text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8);
    color: #111;
}

.admonitionblock td.icon .icon-warning:before {
    content: "\f071";
    color: #bf6900;
}

.admonitionblock td.icon .icon-caution:before {
    content: "\f06d";
    color: #bf3400;
}

.admonitionblock td.icon .icon-important:before {
    content: "\f06a";
    color: #bf0000;
}

.conum[data-value] {
    display: inline-block;
    color: #fff !important;
    background-color: rgba(0, 0, 0, 0.8);
    -webkit-border-radius: 100px;
    border-radius: 100px;
    text-align: center;
    font-size: 0.75em;
    width: 1.67em;
    height: 1.67em;
    line-height: 1.67em;
    font-family: "Open Sans", "DejaVu Sans", sans-serif;
    font-style: normal;
    font-weight: bold;
}

.conum[data-value] * {
    color: #fff !important;
}

.conum[data-value] + b {
    display: none;
}

.conum[data-value]:after {
    content: attr(data-value);
}

pre .conum[data-value] {
    position: relative;
    top: -0.125em;
}

b.conum * {
    color: inherit !important;
}

.conum:not([data-value]):empty {
    display: none;
}

h1, h2 {
    letter-spacing: -0.01em;
}

dt, th.tableblock, td.content {
    text-rendering: optimizeLegibility;
}

p, td.content {
    letter-spacing: -0.01em;
}

p strong, td.content strong {
    letter-spacing: -0.005em;
}

p, blockquote, dt, td.content {
    font-size: 1.0625rem;
}

p {
    margin-bottom: 1.25rem;
}

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock {
    font-size: 1em;
}

.exampleblock > .content {
    background-color: #fffef7;
    border-color: #e0e0dc;
    -webkit-box-shadow: 0 1px 4px #e0e0dc;
    box-shadow: 0 1px 4px #e0e0dc;
}

.print-only {
    display: none !important;
}

@media print {
    @page {
        margin: 1.25cm 0.75cm;
    }

    * {
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a {
        color: inherit !important;
        text-decoration: underline !important;
    }

    a.bare, a[href^="#"], a[href^="mailto:"] {
        text-decoration: none !important;
    }

    a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after {
        content: "(" attr(href) ")";
        display: inline-block;
        font-size: 0.875em;
        padding-left: 0.25em;
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    pre, blockquote, tr, img {
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group;
    }

    img {
        max-width: 100% !important;
    }

    p, blockquote, dt, td.content {
        font-size: 1em;
        orphans: 3;
        widows: 3;
    }

    h2, h3, #toctitle, .sidebarblock > .content > .title, #toctitle, .sidebarblock > .content > .title {
        page-break-after: avoid;
    }

    #toc, .sidebarblock, .exampleblock > .content {
        background: none !important;
    }

    #toc {
        border-bottom: 1px solid #ddddd8 !important;
        padding-bottom: 0 !important;
    }

    .sect1 {
        padding-bottom: 0 !important;
    }

    .sect1 + .sect1 {
        border: 0 !important;
    }

    #header > h1:first-child {
        margin-top: 1.25rem;
    }

    body.book #header {
        text-align: center;
    }

    body.book #header > h1:first-child {
        border: 0 !important;
        margin: 2.5em 0 1em 0;
    }

    body.book #header .details {
        border: 0 !important;
        display: block;
        padding: 0 !important;
    }

    body.book #header .details span:first-child {
        margin-left: 0 !important;
    }

    body.book #header .details br {
        display: block;
    }

    body.book #header .details br + span:before {
        content: none !important;
    }

    body.book #toc {
        border: 0 !important;
        text-align: left !important;
        padding: 0 !important;
        margin: 0 !important;
    }

    body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 {
        page-break-before: always;
    }

    .listingblock code[data-lang]:before {
        display: block;
    }

    #footer {
        background: none !important;
        padding: 0 0.9375em;
    }

    #footer-text {
        color: rgba(0, 0, 0, 0.6) !important;
        font-size: 0.9em;
    }

    .hide-on-print {
        display: none !important;
    }

    .print-only {
        display: block !important;
    }

    .hide-for-print {
        display: none !important;
    }

    .show-for-print {
        display: inherit !important;
    }
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_pre_requisites">Pre-requisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The RHEL/CentOS Linux Distribution will be used for this solution. The instruction provides details for the last 2 mayor versions: 6 and 7.</p>
</div>
<div class="paragraph">
<p>For references purposes, the following machines will used:</p>
</div>
<table class="tableblock frame-all grid-all">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">IP address</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>onmssrv01</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.168.205.151</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>onmssrv02</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.168.205.152</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>pgdbsrv01</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.168.205.153</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>pgdbsrv02</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.168.205.154</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nfssrv01</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.168.205.155</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The virtual IP will be:<br></p>
</div>
<div class="paragraph">
<p><em>onmssrvvip</em> : <code>192.168.205.150</code></p>
</div>
<div class="paragraph">
<p>The IP addresses must be configured statically on each machine prior starting configuring the cluster.</p>
</div>
<div class="sect2">
<h3 id="_testing_lab_setup">Testing Lab Setup</h3>
<div class="paragraph">
<p>Ignore this section if you want to use real servers for this deployment.</p>
</div>
<div class="paragraph">
<p>For the testing environment the following tools must be downloaded and installed on your system:</p>
</div>
<div class="paragraph">
<p>Vagrant (www.vagrantup.com)
VirtualBox (www.virtualbox.org)</p>
</div>
<div class="paragraph">
<p>Your testing machine must have at least 8 GB of RAM with a quad-core processor, as the testing environment will require 5 VMs, and two of them requires 2GB, for a total of 7GB.</p>
</div>
<div class="paragraph">
<p>Create a directory and inside of it create a file called Vagrantfile, with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-yaml" data-lang="yaml">Unresolved directive in prerequisites.adoc - include::../files/prerequisites/Vagrantfile[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above file will setup 5 machines using <em>CentOS 6.6</em>.
In order to use <em>CentOS 7</em>, replace the value of the <code>config.vm.box</code> attribute from <code>chef/centos-6.6</code> to <code>chef/centos-7.1</code>.
If you want to use <em>CentOS 6</em> on some machines and <em>CentOS 7</em> on other machines, just add a <code>:box</code> attribute on the <em>JSON</em> configuration for the boxes on which you want a different OS than the default (the default box is <code>config.vm.box</code>).</p>
</div>
<div class="paragraph">
<p>To startup the VMs, execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">vagrant up</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will take several minutes to download the base image, create the 5 machines, and execute the provisioning on each of them.</p>
</div>
<div class="paragraph">
<p>To <em>SSH</em> a specific box, use the <code>vagrant ssh</code> command follow by the name of the VM, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">vagrant ssh onmssrv01</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Vagrant</em> automatically generates a user called <code>vagrant</code> with <em>sudo</em> access without password.</p>
</div>
<div class="paragraph">
<p>As almost all the commands used on this tutorial requires <em>root</em> access, you could either become <em>root</em> (and change the <em>root</em> password on each VM), or use the <em>vagrant</em> user with <code>sudo</code> for all the commands.</p>
</div>
<div class="paragraph">
<p>By default, <em>SELinux</em> is configured as <em>permissive</em> in <code>/etc/sysconfig/selinux</code>.
For full security, it is recommended to change it to be <em>enforcing</em> and restart the VMs, as this is the default option in <em>RHEL/CentOS 6</em> and <em>7</em>.</p>
</div>
<div class="paragraph">
<p>To restart all the VMs with Vagrant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">$ vagrant reload</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, the internal firewall must be enabled by default.
There is a section designated to explain how to properly configure the internal firewall on each <em>Linux</em> distribution.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hostnames">Hostnames</h3>
<div class="paragraph">
<p>Before we will get started with the setup, it’s important that all nodes in the setup can connect to each other via their hostname.
This could be achieve by either adding the involved hosts to the <code>/etc/hosts</code> file, or use the <em>FQDN</em> registered on the <em>DNS</em> servers.</p>
</div>
<div class="paragraph">
<p>If <em>DNS</em> is not an option, the <code>/etc/hosts</code> should look like the following on each server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

192.168.205.151  onmssrv01.local       onmssrv01
192.168.205.152  onmssrv02.local       onmssrv02
192.168.205.153  pgdbsrv01.local       pgdbsrv01
192.168.205.154  pgdbsrv02.local       pgdbsrv02
192.168.205.155  nfssrv01.local        nfssrv01</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be sure that the domain is properly declared at <code>/etc/idmapd.conf</code> for all the hosts, including the <em>NFS</em> server.
In this particular case, the domain is <code>local</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[root@nfssrv01]# more /etc/idmapd.conf
[General]
#Verbosity = 0
# The following should be set to the local NFSv4 domain name
# The default is the host's DNS domain name.
Domain = local</code></pre>
</div>
</div>
<div class="paragraph">
<p>To restart all the VMs with <em>Vagrant</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">$ vagrant reload</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_postgresql_repository">PostgreSQL Repository</h3>
<div class="paragraph">
<p>The standard <em>RHEL/CentOS</em> repositories do not contain the packages for <em>pgpool-II</em> or <em>repmgr</em>.
Also, the supported <em>PostgreSQL</em> version for <em>RHEL/CentOS 6</em> is <em>8.4</em>, and for <em>RHEL/CentOS 7</em> is <em>9.2</em>.</p>
</div>
<div class="paragraph">
<p>Because this solution required the usage of <em>PostgreSQL 9.4</em>, <em>repmgr 3.0</em> and <em>pgpool-II 3.4</em>, we need to add the <em>PGDG</em> repository.</p>
</div>
<div class="paragraph">
<p>The <em>PGDG</em> provides packages for <em>pgpool-II</em>, but we are going to use a different repository because I found a dependency issue with the <em>RPM</em> provided on the <em>PGDG</em> repository.</p>
</div>
<div class="paragraph">
<p><em>PGDG</em> is a project that maintains <em>RPM</em> builds of <em>PostgreSQL</em> and related components.
You can find more information and repo-URL’s for <em>PGDG</em> here:</p>
</div>
<div class="paragraph">
<p><a href="http://yum.postgresql.org/repopackages.php" class="bare">http://yum.postgresql.org/repopackages.php</a></p>
</div>
<div class="paragraph">
<p>The <em>pgpool-II</em> maintainers, provides information about their <em>YUM</em> repository here:</p>
</div>
<div class="paragraph">
<p><a href="http://www.pgpool.net/mediawiki/index.php/Yum_Repository" class="bare">http://www.pgpool.net/mediawiki/index.php/Yum_Repository</a></p>
</div>
<div class="paragraph">
<p>Let’s add the <em>PGDG</em> repo on all nodes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[root@pgdbsrv01 ~]# yum install http://yum.postgresql.org/9.4/redhat/rhel-6-x86_64/pgdg-centos94-9.4-1.noarch.rpm -y
[root@pgdbsrv02 ~]# yum install http://yum.postgresql.org/9.4/redhat/rhel-6-x86_64/pgdg-centos94-9.4-1.noarch.rpm -y
[root@onmssrv01 ~]# yum install http://yum.postgresql.org/9.4/redhat/rhel-6-x86_64/pgdg-centos94-9.4-1.noarch.rpm -y
[root@onmssrv02 ~]# yum install http://yum.postgresql.org/9.4/redhat/rhel-6-x86_64/pgdg-centos94-9.4-1.noarch.rpm -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <em>RHEL/CentOS 7</em>, replace <code>rhel-6</code> with <code>rhel-7</code>.</p>
</div>
<div class="paragraph">
<p>As mentioned before, we’re going to use the following repository for <em>pgpool-II</em>, which must be installed only on the <em>Pgpool-II</em> server (in this case, the <em>OpenNMS</em> servers).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[root@onmssrv01 ~]# yum install http://www.pgpool.net/yum/rpms/3.4/redhat/rhel-6-x86_64/pgpool-II-release-3.4-1.noarch.rpm -y 
[root@onmssrv02 ~]# yum install http://www.pgpool.net/yum/rpms/3.4/redhat/rhel-6-x86_64/pgpool-II-release-3.4-1.noarch.rpm -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <em>RHEL/CentOS 7</em>, replace <code>rhel-6</code> with <code>rhel-7</code>.</p>
</div>
<div class="paragraph">
<p>To avoid version conflicts between the two versions of <em>pgpool-II</em> and <em>libmemcached</em>, edit the <code>/etc/yum.repos.d/pgdg-94-centos.repo</code> file (i.e. the <em>PGDG</em> repository), to exclude <em>libmemcached</em> by adding the following line at the end of the section called <code>pgdb94</code>, on the <em>OpenNMS</em> servers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[pgdg94]
name=PostgreSQL 9.4 $releasever - $basearch
baseurl=http://yum.postgresql.org/9.4/redhat/rhel-$releasever-$basearch
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-PGDG-94
exclude=libmemcached*</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you forget this step, you’ll get errors when executing <code>yum update</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_opennms_repository">OpenNMS Repository</h3>
<div class="sect3">
<h4 id="_horizon">Horizon</h4>
<div class="paragraph">
<p>The first step is to install the <em>opennms-repo</em> <em>RPM</em> appropriate for your distribution.
This contains the information <em>YUM</em> needs to get <em>OpenNMS</em> package information for installing.</p>
</div>
<div class="paragraph">
<p>To do so, find the appropriate release <em>RPM</em> from <a href="http://yum.opennms.org/">yum.opennms.org</a>.</p>
</div>
<div class="paragraph">
<p>Then all you should need to do is install that repo package (as <code>root</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[root@onmssrv01 ~]# yum install http://yum.opennms.org/repofiles/opennms-repo-stable-rhel6.noarch.rpm -y
[root@onmssrv01 ~]# yum install http://yum.opennms.org/repofiles/opennms-repo-stable-rhel6.noarch.rpm -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <em>CentOS/RHEL 7</em>, replace <code>rhel6</code> with <code>rhel7</code>.</p>
</div>
<div class="paragraph">
<p>This solution has been tested with <em>OpenNMS Horizon 14</em>, <em>15</em> and <em>16</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_meridian">Meridian</h4>
<div class="paragraph">
<p>When you buy a <em>Meridian</em> license, you’ll get the credentials to access the private repository that contains the <em>RPM</em> packages.
Once you have the credentials, create a <em>YUM</em> repository file called <code>/etc/yum.repos.d/opennms-meridian.repo</code>, with the following content on each <em>OpenNMS</em> server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[meridian]
name=Meridian for Red Hat Enterprise Linux and CentOS
baseurl=https://username:password@meridian.opennms.com/packages/2015/stable/rhel$releasever
enabled=1
gpgcheck=1
gpgkey=http://yum.opennms.org/OPENNMS-GPG-KEY</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>username</code> and <code>password</code> with the proper credentials.</p>
</div>
<div class="paragraph">
<p>This solution has been tested with <em>OpenNMS Meridian 2015.1.0</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rpm_packages_installation">RPM Packages Installation</h3>
<div class="sect3">
<h4 id="_database_packages">Database Packages</h4>
<div class="paragraph">
<p>The <em>Pgpool-II</em> servers (i.e. the <em>OpenNMS</em> servers) are not going to run <em>PostgreSQL</em>, but it is recommended to install the <code>postgresql</code> packages on these servers.
For this reason, install the following packages on the <em>pgpoo-II/OpenNMS</em> servers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]$ yum install postgresql94 postgresql94-server postgresql94-libs pgpool-II-pg94 rsync -y
 [root@onmssrv02 ~]$ yum install postgresql94 postgresql94-server postgresql94-libs pgpool-II-pg94 rsync -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the database servers, install the packages for PostgreSQL Server and repmgr:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]$ yum install postgresql94 postgresql94-server postgresql94-contrib repmgr94 rsync -y
[root@pgdbsrv02 ~]$ yum install postgresql94 postgresql94-server postgresql94-contrib repmgr94 rsync -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, the <code>postgres</code> user must exist on all the 4 machines.
You can check it with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]$ # grep postgres /etc/passwd
postgres:x:26:26:PostgreSQL Server:/var/lib/pgsql:/bin/bash</code></pre>
</div>
</div>
<div class="paragraph">
<p>The user will be created automatically as part of the installation of the <code>postgresql94-server</code> package.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Do not make <em>Pgpool-II</em> to start with the operating system, because it will be managed by the cluster services.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_opennms_packages">OpenNMS Packages</h4>
<div class="paragraph">
<p>Starting with <em>OpenNMS Horizon 16</em>, <em>OpenNMS</em> requires <em>Oracle JDK 8</em>.
For <em>Meridian</em> and older versions of <em>Horizon</em>, <em>Oracle JDK 7</em> is required.
The appropriate <em>JDK</em> will be installed with <em>OpenNMS</em>, as they are provided through the <em>OpenNMS YUM</em> repositories.</p>
</div>
<div class="paragraph">
<p>For Horizon:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# yum install opennms-core opennms-webapp-jetty -y
[root@onmssrv01 ~]# yum install 'perl(LWP)' 'perl(XML::Twig)' -y
[root@onmssrv02 ~]# yum install opennms-core opennms-webapp-jetty -y
[root@onmssrv02 ~]# yum install 'perl(LWP)' 'perl(XML::Twig)' -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you’re planning to use <em>RRDtool</em> with <em>Horizon</em> and you’re using <em>RHEL/CentOS 6</em>, it is recommended to download the <code>rrdtool</code> and <code>rrdtool-perl</code> packages (version 1.4.7) from <a href="http://packages.express.org/rrdtool/" class="bare">http://packages.express.org/rrdtool/</a>, instead of using the packages from the distribution.
For <em>RHEL/CentOS 7</em>, use the <code>rrdtool</code> packages available for the distribution.</p>
</div>
<div class="paragraph">
<p>For Meridian:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# yum install meridian-core meridian-webapp-jetty -y
[root@onmssrv01 ~]# yum install 'perl(LWP)' 'perl(XML::Twig)' -y
[root@onmssrv02 ~]# yum install meridian-core meridian-webapp-jetty -y
[root@onmssrv02 ~]# yum install 'perl(LWP)' 'perl(XML::Twig)' -y</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Meridian</em> provides <em>RRDtool</em> and it is enabled by default.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Do not make <em>OpenNMS</em> to start with the operating system, because it will be managed by the cluster services.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_redhat_cluster_packages">RedHat Cluster Packages</h4>
<div class="paragraph">
<p>The <em>High Availability YUM group</em> must be installed on each cluster member (i.e. the <em>OpenNMS</em> machines):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# yum groupinstall "High Availability" -y
[root@onmssrv02 ~]# yum groupinstall "High Availability" -y</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
By default, the above group is going to install the default cluster services for the selected <em>Linux</em> distribution.
           For <em>CentOS/RHEL 6</em>, <em>CMAN/Ricci</em>; for <em>CentOS/RHEL 7</em> <em>Pacemaker</em>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_nfs_packages">NFS Packages</h4>
<div class="paragraph">
<p>On all the servers, make sure the following packages are installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>nfs-utils</code></p>
</li>
<li>
<p><code>nfs-utils-lib</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then, on the <em>NFS</em> server, enable and start the <em>NFS</em> service:</p>
</div>
<div class="paragraph">
<p>On <em>RHEL/CentOS 6</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@nfssrv01 ~]# chkconfig nfs on
[root@nfssrv01 ~]# service nfs start</code></pre>
</div>
</div>
<div class="paragraph">
<p>On <em>RHEL/CentOS 7</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@nfssrv01 ~]# systemctl enable nfs-server
[root@nfssrv01 ~]# systemctl start nfs-server</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_os_updates">OS Updates</h4>
<div class="paragraph">
<p>It is always recommended to keep the OS up to date, so at this point it is a good time to perform a <em>YUM</em> update on all the servers, and reboot them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# yum update -y
[root@onmssrv02 ~]# yum update -y
[root@pgdbsrv01 ~]# yum update -y
[root@pgdbsrv02 ~]# yum update -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>After updating all packages, it is recommended to reboot all machines.
If you’re using the <em>Vagrant lab</em>, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">$ vagrant reload</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_customization_of_initialization_scripts">Customization of Initialization Scripts</h3>
<div class="paragraph">
<p><em>Pgpool</em> and <em>OpenNMS</em> expects that <em>PostgreSQL</em> is up and running, and all the connections are available prior starting the services.</p>
</div>
<div class="paragraph">
<p>To avoid potential problems with the <em>OpenNMS</em> cluster when a machine dies, the following steps are necessary.</p>
</div>
<div class="paragraph">
<p>On each <em>OpenNMS</em> server, create a script called <code>dbcleanup</code> at <code>/usr/local/bin/</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">Unresolved directive in prerequisites.adoc - include::../files/prerequisites/dbcleanup.sh[]</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Update the variables according to your environment.
         Make sure the permissions on the file are 0700:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# chmod 0700 /usr/local/bin/dbcleanup.sh
[root@onmssrv02 ~]# chmod 0700 /usr/local/bin/dbcleanup.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>On each <em>PostgreSQL</em> server, create a script called <code>cleanup.sh</code> at <code>/var/lib/psql/9.4/</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">Unresolved directive in prerequisites.adoc - include::../files/prerequisites/cleanup.sh[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure up update the ownership and the permissions on the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]# chmod 0700 /var/lib/pgsql/9.4/cleanup.sh
[root@pgdbsrv01 ~]# chown postgres:postgres /var/lib/pgsql/9.4/cleanup.sh

[root@pgdbsrv02 ~]# chmod 0700 /var/lib/pgsql/9.4/cleanup.sh
[root@pgdbsrv02 ~]# chown postgres:postgres /var/lib/pgsql/9.4/cleanup.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, it is important to tune the initialization scripts properly.</p>
</div>
<div class="sect3">
<h4 id="_sysv_initialization_scripts_rhel_centos_6">SysV Initialization Scripts (RHEL/CentOS 6)</h4>
<div class="paragraph">
<p>Edit the file <code>/etc/init.d/pgpool</code>, and inside the start function, call the <code>dbcleanup.sh</code> script before start <em>pgpool</em>.
Here is how the content should look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">Unresolved directive in prerequisites.adoc - include::../files/prerequisites/pgpool[]</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Be careful when upgrading the installed packages because the files modified above might be overridden and will require to be updated again.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_systemd_initialization_scripts_rhel_centos_7">Systemd Initialization Scripts (RHEL/CentOS 7)</h4>
<div class="paragraph">
<p>The <em>systemd</em> initialization script for <em>pgpool-II</em> is not correct and it must be fixed prior start using <em>pgpool</em>.
Edit the <code>/lib/systemd/system/pgpool.service</code> file and make sure the content looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>Unresolved directive in prerequisites.adoc - include::../files/prerequisites/pgpool.service[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, edit <code>/usr/lib/tmpfiles.d/pgpool-II-pg94.conf</code> and make sure it contents look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Unresolved directive in prerequisites.adoc - include::../files/prerequisites/pgpool-II-pg94.conf[]</pre>
</div>
</div>
<div class="paragraph">
<p>To avoid reboot the system, fix the ownership of the directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>[root@onmssrv01 ~]# chown postgres:postgres /var/run/pgpool</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, by default the <em>systemd</em> initialization script for <em>OpenNMS</em> will force <code>START_TIMEOUT=0</code>.
In order to avoid potential problems when checking the <em>OpenNMS</em> state, it is better to disable this option.</p>
</div>
<div class="paragraph">
<p>Edit the <code>/usr/lib/systemd/system/opennms.service</code> file, remove the <code>-Q</code> from the <code>ExecStart</code> method; add <code>TimeoutStartSec=0</code> and replace <code>postgresql</code> with <code>pgpool</code>.
The content should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">Unresolved directive in prerequisites.adoc - include::../files/prerequisites/opennms.service[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, it is important to update the default options used by <code>pgpool</code> when it initializes.
These options are defined on <code>/etc/sysconfig/pgpool</code>.
Be sure they look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">OPTS=" -n --discard-status"</code></pre>
</div>
</div>
<div class="paragraph">
<p>After updating the files, execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# systemctl daemon-reload</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remember to do the same on <em>onmssrv02</em>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Be careful when upgrading the installed packages because the files modified above might be overridden and will require to be updated again.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_public_key_authentication">Public Key Authentication</h3>
<div class="paragraph">
<p>All nodes must connect to each other over <em>SSH</em> without a password prompt for the <em>postgres</em> user.
<em>SSH</em> will be used to <em>rsync</em> the data from the primary to the standby, and to initiate a failover from <em>pgpool-II</em> servers.
Password-less <em>SSH</em> can be achieved with public key authentication.</p>
</div>
<div class="paragraph">
<p>On each of the 4 servers (both <em>OpenNMS</em> servers and both <em>DB</em> servers), generate a new <em>SSH</em> key for the <em>postgres</em> user without passphrase:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]# su - postgres -c "ssh-keygen -t rsa"
Generating public/private rsa key pair.
Enter file in which to save the key (/var/lib/pgsql/.ssh/id_rsa):
Created directory '/var/lib/pgsql/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /var/lib/pgsql/.ssh/id_rsa.
Your public key has been saved in /var/lib/pgsql/.ssh/id_rsa.pub.
The key fingerprint is:
22:fd:26:d2:0b:a4:30:62:a8:99:37:03:b9:2e:25:89 postgres@pgdbsrv01.local</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have the <em>SSH</em> keys, to allow all machines to connect to each other an accept each other’s key, we’ll need to add the generated public keys from all hosts to <code>/var/lib/pgsql/.ssh/authorized_keys</code>.</p>
</div>
<div class="paragraph">
<p>To show the public <em>RSA-key</em>, use the following command on each server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]$ cat /var/lib/pgsql/.ssh/id_rsa.pub</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, create the <code>authorized_keys</code> file, and put all the public keys inside (one per line).
The content of the file should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]# cat /var/lib/pgsql/.ssh/authorized_keys
ssh-rsa AAAAB3...== postgres@onmssrv01.local
ssh-rsa AAAAB3...== postgres@onmssrv02.local
ssh-rsa AAAAB3...== postgres@pgdbsrv01.local
ssh-rsa AAAAB3...== postgres@pgdbsrv02.local</code></pre>
</div>
</div>
<div class="paragraph">
<p>The actual keys have been omitted for simplification purposes.</p>
</div>
<div class="paragraph">
<p>Since we really want unattended access (so no password or any other question), I’ll also add all hosts to the <code>known_hosts</code>-file.
This prevents the question to add the hosts fingerprint on the first connection (be sure to execute the following command on all the servers):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]# su - postgres -c "ssh-keyscan -H {onmssrv01,onmssrv02,pgdbsrv01,pgdbsrv02}| tee ~/.ssh/known_hosts"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>authorized_keys</code> and <code>known_host</code> on <em>pgdbsrv01</em> are fine for all other hosts.
Use <code>scp</code> to copy these files to the other nodes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]# scp /var/lib/pgsql/.ssh/{authorized_keys,known_hosts} pgdbsrv02:/var/lib/pgsql/.ssh/
[root@pgdbsrv01 ~]# scp /var/lib/pgsql/.ssh/{authorized_keys,known_hosts} onmssrv01:/var/lib/pgsql/.ssh/
[root@pgdbsrv01 ~]# scp /var/lib/pgsql/.ssh/{authorized_keys,known_hosts} onmssrv02:/var/lib/pgsql/.ssh/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be sure the to fix the permissions of the files on each server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]# chmod 600 /var/lib/pgsql/.ssh/authorized_keys
[root@pgdbsrv01 ~]# chown postgres:postgres -R /var/lib/pgsql/.ssh/*
[root@pgdbsrv01 ~]# restorecon -R  /var/lib/pgsql/</code></pre>
</div>
</div>
<div class="paragraph">
<p>It’s a good thing to test the authentication now, by just trying to <em>SSH</em> between all nodes (as the <em>postgres</em> user).
You shouldn’t get any prompt at all and be presented with the other host’s command prompt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]# su - postgres
-bash-4.1$ ssh onmssrv01
Last login: Mon Jul 13 09:22:42 2015 from 192.168.205.163
-bash-4.1$ hostname
onmssrv01.local
-bash-4.1$ exit
logout
Connection to onmssrv01 closed.
-bash-4.1$ ssh onmssrv02
Last login: Mon Jul 13 09:22:53 2015 from 192.168.205.163
-bash-4.1$ hostname
onmssrv02.local
-bash-4.1$ exit
logout
Connection to onmssrv02 closed.
-bash-4.1$ ssh pgdbsrv02
Last login: Mon Jul 13 09:23:27 2015 from 192.168.205.163
-bash-4.1$ hostname
pgdbsrv02.local
-bash-4.1$ exit
logout
Connection to pgdbsrv02 closed.
-bash-4.1$ exit
logout</code></pre>
</div>
</div>
<div class="paragraph">
<p>Repeat the above set of commands for each host on each server to be sure that <em>postgres</em> user can <em>SSH</em> without passwords.</p>
</div>
</div>
<div class="sect2">
<h3 id="_internal_firewall">Internal Firewall</h3>
<div class="sect3">
<h4 id="_rhel_centos_6">RHEL/CentOS 6</h4>
<div class="paragraph">
<p>The first thing to do is enable and start <code>iptables</code> on all servers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# /etc/init.d/iptables start
[root@onmssrv01 ~]# /etc/init.d/iptables save
[root@onmssrv01 ~]# chkconfig iptables on</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, the file <code>/etc/sysconfig/iptables</code> should exist.
Edit this file on both servers, and add the following content before the <code>COMMIT</code> instruction and save the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -j REJECT --reject-with icmp-host-prohibited</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above instructions are the default content for a standard <em>CentOS 6</em> box, so it could be possible that the above lines already exist on that file.
But, if you’re using the <em>Vagrant lab</em>, <em>iptables</em> is not enabled or configured by default, the lines are needed.</p>
</div>
<div class="paragraph">
<p>Copy <code>/etc/sysconfig/iptables</code> from <em>onmssrv01</em> to <em>onmssrv02</em>, <em>pgdbsrv01</em> and <em>pgdbsrv02</em>.
Then restart the <em>iptables</em> service on all the machines.
This will ensure that the basic firewall configuration is the same on all servers.</p>
</div>
<div class="paragraph">
<p>The following are the ports to be opened for OpenNMS:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Opened ports for OpenNMS</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Protocol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5817</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenNMS event listener</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8980</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenNMS WebUI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18980</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenNMS JMX Management (internal monitoring)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8181</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenNMS JMX Configuration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9999</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pgpool-II (PostgreSQL cluster)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">162</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SNMP Traps (To receive traps in OpenNMS)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><em>RHEL 6</em> uses <em>CMAN/Ricci</em> and optionally <em>luci</em> for managing the cluster.
The following are the ports to open on each cluster member (i.e. the <em>OpenNMS</em> machines):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Opened ports for Cluster management</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Protocol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5404, 5405</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">corosync/cman (Cluster Manager)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11111</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ricci (propagates updated cluster information)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">21064</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dlm (Distributed Lock Manager)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16851</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">modclusterd</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8084</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TCP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Optional</em>: luci (WebUI to configure the cluster)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>On each <em>OpenNMS</em> servers, edit the <code>/etc/sysconfig/iptables</code> file and add the following rules before the first <code>REJECT</code> entry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>|----
-A INPUT -p udp -m multiport --dports 5404,5405 -j ACCEPT
-A INPUT -p tcp --dport 11111 -j ACCEPT
-A INPUT -p tcp --dport 21064 -j ACCEPT
-A INPUT -p tcp --dport 16851 -j ACCEPT
-A INPUT -p tcp --dport 8084 -j ACCEPT</code></pre>
</div>
</div>
<div class="paragraph">
<p>-A INPUT -p tcp --dport 5817 -j ACCEPT
-A INPUT -p tcp --dport 8980 -j ACCEPT
-A INPUT -p tcp --dport 18980 -j ACCEPT
-A INPUT -p tcp --dport 8181 -j ACCEPT
-A INPUT -p tcp --dport 9999 -j ACCEPT
-A INPUT -p udp --dport 162 -j ACCEPT
|----</p>
</div>
<div class="paragraph">
<p>On each <em>PostgreSQL</em> servers, open the port <em>TCP 5432</em>.
To do this, edit the <code>/etc/sysconfig/iptables</code> file, and add the following rules before the first <code>REJECT</code> entry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>-A INPUT -p tcp --dport 5432 -j ACCEPT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Repeat the process on the standby <em>PostgreSQL</em> server (<em>pgdbsrv02</em>).</p>
</div>
<div class="paragraph">
<p>On the <em>NFS</em> server, open the port <em>TCP 2049</em>.
To do this, edit the <code>/etc/sysconfig/iptables</code> file, and add the following rules before the first <code>REJECT</code> entry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>-A INPUT -p tcp --dport 2049 -j ACCEPT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, restart <em>iptables</em> on all the servers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# service iptables restart
[root@onmssrv02 ~]# service iptables restart
[root@pgdbsrv01 ~]# service iptables restart
[root@pgdbsrv02 ~]# service iptables restart
[root@nfssrv01 ~]# service iptables restart</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rhel_centos_7">RHEL/CentOS 7</h4>
<div class="paragraph">
<p>The first thing to do is enable and start firewalld on all servers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# systemctl enable firewalld
ln -s '/usr/lib/systemd/system/firewalld.service' '/etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service'
ln -s '/usr/lib/systemd/system/firewalld.service' '/etc/systemd/system/basic.target.wants/firewalld.service'
[root@onmssrv01 ~]# systemctl start firewalld
[root@onmssrv01 ~]# systemctl status firewalld
firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled)
   Active: active (running) since Thu 2015-07-16 18:55:59 UTC; 4s ago
 Main PID: 29635 (firewalld)
   CGroup: /system.slice/firewalld.service
           └─29635 /usr/bin/python -Es /usr/sbin/firewalld --nofork --nopid

Jul 16 18:55:59 testsrv.local systemd[1]: Started firewalld - dynamic firewall daemon.</code></pre>
</div>
</div>
<div class="paragraph">
<p>All firewall changes must be executed against <em>firewalld</em> using <code>firewall-cmd</code> and not through <em>iptables</em>.</p>
</div>
<div class="paragraph">
<p>Repeat the above commands on the rest of the servers: <em>onmssrv02</em>, <em>pgdbsrv01</em>, <em>pgdbsrv02</em> and <em>nfssrv01</em>.</p>
</div>
<div class="paragraph">
<p>On the <em>OpenNMS</em> servers, create a new file called <code>/etc/firewalld/services/opennms.xml</code>, and put the following content inside of it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-xml" data-lang="xml">Unresolved directive in prerequisites.adoc - include::../files/prerequisites/opennms.xml[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, reload firewall configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# firewall-cmd --reload
success</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the following command to verify that the new service called <em>opennms</em> is listed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# firewall-cmd --get-services
RH-Satellite-6 amanda-client bacula bacula-client dhcp dhcpv6 dhcpv6-client dns ftp high-availability http https imaps ipp ipp-client ipsec kerberos kpasswd ldap ldaps libvirt libvirt-tls mdns mountd ms-wbt mysql nfs ntp opennms openvpn pmcd pmproxy pmwebapi pmwebapis pop3s postgresql proxy-dhcp radius rpc-bind samba samba-client smtp ssh telnet tftp tftp-client transmission-client vnc-server wbem-https</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enable the <em>opennms</em> service</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# firewall-cmd --permanent --add-service=opennms
success
[root@onmssrv01 ~]# firewall-cmd --add-service=opennms
success</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>RHEL 7</em> uses <em>Pacemaker</em> for managing the cluster.
There is already a service group for high availability applications that includes <em>Pacemaker</em> ports.
To enable it on <em>firewalld</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# firewall-cmd --permanent --add-service=high-availability
success
[root@onmssrv01 ~]# firewall-cmd --add-service=high-availability
success</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, reload the firewall configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# firewall-cmd --reload
success</code></pre>
</div>
</div>
<div class="paragraph">
<p>Repeat all the process on the standby <em>OpenNMS</em> server (<em>onmssrv02</em>).</p>
</div>
<div class="paragraph">
<p>On the <em>PostgreSQL</em> servers, execute the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@pgdbsrv01 ~]# firewall-cmd --permanent --add-service=postgresql
success
[root@pgdbsrv01 ~]# firewall-cmd --add-service=postgresql
success
[root@pgdbsrv01 ~]# firewall-cmd --reload
success</code></pre>
</div>
</div>
<div class="paragraph">
<p>Repeat the process on the standby <em>PostgreSQL</em> server (<em>pgdbsrv02</em>).</p>
</div>
<div class="paragraph">
<p>On the <em>NFS</em> server, execute the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@nfssrv01 ~]# firewall-cmd --permanent --add-service=nfs
success
[root@nfssrv01 ~]# firewall-cmd --add-service=nfs
success
[root@nfssrv01 ~]# firewall-cmd --reload
success</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_syslogd_in_opennms">Syslogd in OpenNMS</h4>
<div class="paragraph">
<p>In case you’re interested on using <em>Syslog</em> to receive <em>syslog</em> messages and convert them into events, you should open the port you’re going to use for this purpose.
By default the port is 10514, but it could be different.
This port is configured on <code>/opt/opennms/etc/syslogd-configuration.xml</code>.</p>
</div>
<div class="paragraph">
<p>If the port is changed, then the firewall rules for <em>OpenNMS</em> must be updated at <code>/etc/firewalld/services/opennms.xml</code>.</p>
</div>
<div class="paragraph">
<p>If the standard <em>syslog</em> server on the <em>OpenNMS</em> servers will be used as a gateway to receive <em>syslog</em> messages from all other servers and then forward them to <em>OpenNMS</em>, the port UDP 514 must be opened.
You can either create a firewall <em>XML</em> file for <em>syslog</em>, or add the port to <code>opennms.xml</code>.</p>
</div>
<div class="paragraph">
<p>If the <code>opennms.xml</code> is updated (or another firewall rule <em>XML</em> file is created), you should reload the firewall configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">[root@onmssrv01 ~]# firewall-cmd --reload
success</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_external_firewalls">External Firewalls</h3>
<div class="paragraph">
<p>It is important to allow communication between <em>OpenNMS</em> and the nodes that are going to be monitored through the appropriate protocols.
Typical applications to open are <em>ICMP</em>, <em>SNMP</em> (UDP 161) and <em>SNMP-Traps</em> (UDP 162).
For other kind of monitor requirements, you might need to open other ports like <em>HTTP</em> (TCP 80).</p>
</div>
<div class="paragraph">
<p>In order to access <em>OpenNMS</em>, the <em>WebUI</em> port must be opened.
By default it is 8980, but it can be changed.
In case the port is changed, the internal firewall rules for <em>OpenNMS</em> must be updated.</p>
</div>
<div class="paragraph">
<p>Also, in some use cases, it is important to inject events directly to <em>OpenNMS</em>.
This is done through the port TCP 5417.</p>
</div>
</div>
<div class="sect2">
<h3 id="_multicast_and_networking">Multicast and Networking</h3>
<div class="paragraph">
<p><em>Corosync</em> which is the common cluster service used on any version of <em>RHEL/CentOS</em> requires that multicast communication is open across all the cluster members.
This is already covered by the firewall rules, but in case of a real environment, make sure that the IP rules on switches (or Virtual Networks, in case of <em>VMWare vCloud</em>) allows multicast; otherwise, the cluster won’t work.</p>
</div>
<div class="paragraph">
<p>Also, it is extremely important to reduce as much as possible the network devices between the cluster members, to reduce potential failure points.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-08-03 11:37:07 CEST
</div>
</div>
</body>
</html>